FROM python:3.11-slim

WORKDIR /app

# ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    && rm -rf /var/lib/apt/lists/*

# Python ì˜ì¡´ì„± ë³µì‚¬ ë° ì„¤ì¹˜
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ğŸ“¦ JSON íŒŒì¼ê³¼ pickle íŒŒì¼ë“¤ ë³µì‚¬
# COPY data/processed/*.json ./data/processed/
# COPY data/processed/*.pkl ./data/processed/

# ë‚˜ë¨¸ì§€ ì½”ë“œ ë³µì‚¬
COPY . .

# âœ… í¬íŠ¸ ë…¸ì¶œ
EXPOSE 8080

# âœ… í™˜ê²½ ë³€ìˆ˜
ENV HOST=0.0.0.0
ENV PORT=8080

# âœ… ì•± ì‹¤í–‰
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8080"]
